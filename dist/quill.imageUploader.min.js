var e,t=(e=require("quill"))&&"object"==typeof e&&"default"in e?e.default:e,i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.create=function(t){var i=e.create.call(this,t);if(!0===t)return i;var o=document.createElement("img");return o.setAttribute("src",t),i.appendChild(o),i},t.prototype.deleteAt=function(t,i){e.prototype.deleteAt.call(this,t,2),this.cache={}},t.value=function(e){var t=e.dataset;return{src:t.src,custom:t.custom}},t}(t.import("blots/block"));i.blotName="imageBlot",i.className="image-uploading",i.tagName="span",t.register({"formats/imageBlot":i});var o=function(e,t){this.quill=e,this.options=t,this.range=null,"function"!=typeof this.options.upload&&console.warn("[Missing config] upload function that returns a promise is required"),this.quill.getModule("toolbar").addHandler("image",this.selectLocalImage.bind(this))};o.prototype.selectLocalImage=function(){var e=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=this.fileChanged.bind(this),document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){document.body.removeChild(e.fileHolder)})},o.prototype.fileChanged=function(){var e=this,t=this.fileHolder.files[0],i=new FileReader;i.addEventListener("load",function(){e.insertBase64Image(i.result)},!1),t&&i.readAsDataURL(t),this.options.upload(t).then(function(t){e.insertToEditor(t)},function(e){console.warn(e.message)})},o.prototype.insertBase64Image=function(e){this.quill.insertEmbed(this.range.index,"image",""+e)},o.prototype.insertToEditor=function(e){var t=this.range;this.quill.deleteText(t.index,2),this.quill.insertEmbed(t.index,"image",""+e),t.index++,this.quill.setSelection(t,"api")},module.exports=o;
//# sourceMappingURL=quill.imageUploader.min.js.map
